sudo: required
dist: xenial
before_install:
- sudo apt update -y
- pip install --user awscli
install:
- mkdir -p ~/.local/lib && mkdir -p ~/.local/bin
- git clone https://$PV_OAUTH_TOKEN@github.com/polyverse-security/pv ~/.local/lib/pv
- ln -s ~/.local/lib/pv/pv ~/.local/bin/pv
script:
- pv aws ecr-login
- "./build.sh || travis_terminate 1;"
- "./test.sh || travis_terminate 1;"
- "./publish.sh || travis_terminate 1;"
env:
  global:
  - secure: cKWwoy3nrTd9ghTNr4z2OaoxUeiODBpVFs/+XQajn9U/WBLFOOnWB2TfDcvxCq9FP21tBa4xXnvkcRPrLN8SQ2+SP/awB/JI+huzR6zhFEduX8wAFfoY2gUHN0vjwn4p7LKBb/4qc+3XfaxpgPN2A+lAxSAIOK5olD+yzfcXN1bWP/jGnvfkNreFYhJimo3VTEggT/GdEfDbvQhftXcnJexy4Oz+oErzOHT9tyHBQb6iECuhcIaFUy+OIc2r8vAvCvbC2EW1oGidrAuwD6q53nMfWKVxAeqqrlbB+PEecTm8N54ISFKmHJx9AmUYzs9TcQKUb4Hsuz8Z9qp/1KUQzueGeVh3UEZNopJ644gTBHJbsUZ7mhOPykgoHV17DyyYG5u6EgCpStOlWfdTfFjMpiyOqVpqPAqHkVxtOY4bHmgov9FFZG4ebV0Bz5wFhsGjigpjQDNKC8RsVXxffU65J/jK6wNgoGMECXQC0zI9V17HRd4PyuA51w62P+Q7nj1zyO+Gqi2P21mH4c9RPak5hpqQfV9RuFErPT1Da8c+basdFKbv4h/CR5EeSUjP7LDJMKQ+hXxuADsEsgk2UQEIuubXIXyPiYfyLtyvJhuvM/VVml5p1SCw0rOtdZgVjXjz88/BcAvhK83Trc785RFVmFYvfxij1F4bfDuCHR6PIJo=
  - secure: KyfGivPCzf65vYVAPaMnwxK+1h1RaIBAF3M2YL/6tAxv4awfFlG32wrEjgSSpJTH+RgjNLWIcDp/9jUc8swj3NR8L68Ho+m9jij4oI5bPn8+CETBTFAGWgpjRfe49mulgjbZg5MMTf4F+qnRj2PN6AIbOIz2XQqWq2XxIj8g5+yupOTt3cx3YlXNCZAKSWDqYnHPelSD7p1bsivpppPIN4XMrhjN5E+ut2lKdqPg0ZSwiJgj7QuGAoqRzngakabw5CGRgTR3bMGvwO29h2DTd3s8sYwumw1wUuQPSacTs5fOJFUpbKt2tVVOOasUR3z3T7GQqRKrWo7Zs+i6ddJwKtAwxPL5gQq6aUNJ0QsmLFzsOUc7UPHUO+pTTei5UMRkqqPySEp1h8cfjaLAtx+55hc2t/9ZXAAOIcWO9Z1TpdzCcVRl99P3p80nSUNDakUlJj8n7hEMZQUyW2bOEiOMV1K8+RjYzKA8s1JfzmXxB+qnZ0gEsAJHryZ/wAzl/UN5PmsxU7Pfc8+qZHfn8gIf2tDbIBXyo1YzUuFGeuYY+ea7SvacRIeIFy+nvoXz8IMN05Vg13bd1DfG6ji3zsgIoDMUFcjFqimGek+2vaXXa1sbG8gTMbh4ZPeeAc2gCRG8C/cPvklY9/Pem60pRw5AIUMyvf7yrjIOOxf1NZvqgdE=
  - secure: VN2fROr5v61GqW4IBv6uNSogjOZ4WWiLrIzLqbcp7iz5jKIHMVGNKSCawCaxh7S2e572DEIpg3csWXEex7hPO4G8hJRWueU8aiyDLb44NKO9MzuIfcYnAqWIDRg6879DRiO1zS0m5ZkvtuCAmPQSrDZH58yAxaCl8/wvvWQ1n4mWK1FM50BswTgCsskl2iDcBZEks1dof8Gm2J0+o1BYjvOMpdHCZo5aGWQPF3+VfGsv6hHrmXDLXAI3o/D/LACdXjxA1Z/MSpwRH+eDX9ViTwJauqEWHxFr1zPWkrTBQhfshJuE8xQKoJP85ZTC4PKBD4zPh9Wps7tzKtJxGfBhp4TO9bK7oiytYnl/WxEZURxNf1ZlQuuvD57HUb8yde/Oc9eTtIUOA9AMb4eFlI8/h3sQNq7YL4/AjRxu8lw9UEzb7RlAGmraYnB7dvb5oCSjmTYk0GQP7U6Pbs3vTw8zMxKo7CeGiXq8uGcJ/iIx1k9ZilHcD5LNyYXy7q//Le+aNWc4g1BI37dHTfugAhHfitYKPOIb7JZddpv1uXTMvgISkFbTd5s6jGGudkDPLyun9GezdDFkhgTF0FUE6nPw8QhnE3Ax3Y0CQ9AfmEWAp7ySpT3tQKis+ExCpiaFTNl+nNL7tdxPXJDAgLmPuQHzzP3qe82e01whB4tfqEm8LAI=
notifications:
  slack:
  - secure: k72lbwF+wIbKbk2fuQSUv+BBLdM/Izl0P5ED5rOAzX9oSF3sgo9Dlu1wpD6vcwUvPy9/hrUzrJcsj3AFch2J3YObRHVn0bFifZI+zKJedKcRjaLKvDYEo8zXN6SvgkSX8nlnwbj2PbYlB94IWWJLchA9o8JQBPyhVr7RXspkRGtu2vQg9hsaooj+zeS92yi0kK7InjYzq/5xeFRLkLiD16jdiC3SLk/viOr+CT/bmQkCpcgnYZInKsO7wxQZa5atJoKigcv3GmUVcnMjolOWag0CmSPyoj7KY4EwYj4+pw7gM80MkxsplESwGF5IgW+kWzf+aAU54ilOba1zXBkH/Kk33yqPURxMSkXSiAgx59kvPGAHCvOt8myBPIYdK2mxznGIh4jajgPJ8Jn+cQc+H+U5UKujK2lx2X+B9lAKuuM/G5zGNN02B4Ws/X62hm6qrcnTwZSD14to6bFX2fHSh7V4xCbxIsJazuNUi1GRvySoAvtVIYWtyWVZU6gi0/JoDhci2mH5gItePSex0YYp/bFieK29lFPJZsPaMT9NflapaZLGDffi5PqKOte2tLxrenrssMBofzjtcMNkUyNhaMoAL5/jr6WtpGxwr1RC/bk8u88zAN2zGDDTORF5kVKj0OhblMBm21ayFHHTkUj3Mb4pH9k8i9LhAfMQ7A9vITc=
