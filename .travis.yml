sudo: required
dist: xenial
before_install:
- sudo apt update -y
- pip install --user awscli
install:
- mkdir -p ~/.local/lib && mkdir -p ~/.local/bin
- git clone https://$PV_OAUTH_TOKEN@github.com/polyverse-security/pv ~/.local/lib/pv
- ln -s ~/.local/lib/pv/pv ~/.local/bin/pv
script:
- pv aws ecr-login
- "./build.sh || travis_terminate 1;"
- "./test.sh || travis_terminate 1;"
- "./publish.sh || travis_terminate 1;"
env:
  global:
    secure: EnLig2GS+KTfix9g0EKBJesG8ya0U6lMTcKZIecRSbAvFNRRhG7rqwK6NWDj+iX4xJpcvMJRMGEGWH9PxY9H3OgJymNS/2on6ozwEy40qY8z2nzEpVnAJcCM2jKs51CgryNWpDjVCyuAM+l71SLMWZ/AYn39M/wefZy41jERknSzlHexTx5u8YkS++kwoURSeCA2n4e8DoG3vVDgqFL8MCNiwvfbO5tY964XqUunyniNP7eato9Jv39YzY7UCXZBC6bO3jhw7wE+wxaHuOuZYrLUZEsmBf836RT8+pkTl0HS5d4jdjkWqHkhuYAqinu2pHqKBFvLkC2HNBMJHeFWFWBqQOfL/ZFq60HmRwCv+mUfn3M0aZyI0YED/uk7dukcNdkKwA89O9u3nnl1Ph/cqDK2EuHR10kksyiCmQoRya/HCXvoaOPOFyozq9Ox7oXcGr89aqPG+KwjCkgIIQ+7Bova08pTEcmDd6QhmoPHyKPb0AUjrfev7WDOIvD658qakq3kvBOfyo0Uo9X4aQY+bWCXxu6mQ/hAwwVOM6RlDg9Mk2rMjq8JAdT7Zq6ahmxyUPert0lb3gWPAzWa7YL40wrqjD3lleKiK6S2Qoun9NHJ1CFKZkFRwZin88UEKZvDM/YHXJ47RPoGXz8Rc9rvFBqK1mSOG9vvvlXvjUZxZdI=
