sudo: required
dist: xenial
before_install:
- sudo apt update -y
- pip install --user awscli
install:
- mkdir -p ~/.local/lib && mkdir -p ~/.local/bin
- git clone https://$PV_OAUTH_TOKEN@github.com/polyverse-security/pv ~/.local/lib/pv
- ln -s ~/.local/lib/pv/pv ~/.local/bin/pv
script:
- pv aws ecr-login
- "./build.sh || travis_terminate 1;"
- "./test.sh || travis_terminate 1;"
- "./publish.sh || travis_terminate 1;"
env:
  global:
  - AWS_DEFAULT_REGION=us-west-2
  - secure: e2CItf72XhSV69ysxvOF7Kc1OizdInTIV/Ky0DTJLQ54TKFTp2vvnN1IXDnakf9JzI2kmQFbJVygsokkLdVXN0D/e6yfvPE7aL+uMEzvPyQu/BZvoFYICMMVDnnGSVHMtQwCIZE3JZB55LYRfHsllFMeqPQ/ft4MUKPfoPnAW1bCuG1kn/bJr+O0sCJENu/Es9a7pf7Bh4N6kkRdnTu8X3jXjqTYNnVvjxG7UxflFc5icTCx0AeNbAINsy3Od15Pe7/xRgjJDHNsB6W1sqT9IiXObpqHpKLFA2fQqVsYYFSvFNUpfoiK4FXa3NdsRCCE7QPUXiwPsFX/JvQiDXWXETXRvSWoGR6haRTE5voTU4OeRIeD68phvVz/FGhWPXv+mSyv+tUg5KrOejb5FfGTWQgvL/S2IjTXOPMJQwp2lKSxAHDXFRhkeoYi5zjQ6O+BdYgOnSwbA2+WV4MpkWc5D8q8dilKVUgn9DEidN2B+NQf8AqDPiGQhFGZCakX8oi4COpUFjdWqRsu98gf3U9Us5GGEHLQ+Zy0YTy+qARjPxzvhhkGuISY1RmG/u9m5WdBYoxgTU7cTCBjaf1q+V5w6QL+tyPFlJRBskfSteDENETpP62A/vX8/oZMaqodUkRB7eXpB5qIvINqlA1VziHMucs4cYqPv0nHViNwiH5wFlY=
  - secure: LFMXCWqcyKbBd8Q2joikfrwCnkT694B6ZIPqOR0of5argoD7hFYnM1mLrRmuygnjQ/05viICOGM/B0/z1EubwIzjoAUsWWhDPuXfLZaaWnTZJPl+glrSzA/odIrF0z+DjpRM6zcW0zReot1PWmTpOHTD6aWPqvvyJ2TlQb672wN1kCGLVRZE7582E/qVHk+RivXe+fYT/JD7XBQXdmVWWbRc74tRSmhKldi3J+qt+C5OV3ULouI9AUkBqajrAkQdOLWdRcfDFEFk1t/tk5VSkaQNPHW32B3yJyZgTTDXB22/7XBDuc4wlEseJAQMkJ/K/teDIfqugiC1pEkRS/lonb/YjIlRIL6tw9X0o02LlS/+FyQxpoCFMfq7SDuwzi5Rq4fDNoz+OAE6i6MLTARsAkfPY7wcYYYnKgaUDyNj++ygTld/x/7tUeu9+5zguwXNBza7BzJnwDHJ8wcfmTeFnVUi/7W+PQHRT4HErrLaFqT7dY4ypCRfnZ8fcF7rJg4R+Y4CjvHL0i0gtEQBjgI8wwzc5GNs8ZkabIXOnXrKGUngGKQha1bMJbP+/KI4pKbbMfc8Y5m2jzOfv2fqsoKKFXlIas4TL+N8JptMIkteGDnsjLQ0/83yr8RoNqgpvCmXiZzlg1wuLlw8ORHCQfprvy3vNa7B+2EB7eakiSGaVu8=
  - secure: ixaHYtwq08yfyWnbMD/eHhCpbplOaRU1++eyo4CGyj86TyenkI3EtJkBm5b+lUtp16Mg/5ppUlORcjXVEB/dVijjUD/PR6ok4A1N/tGSuYD0Qb/BbaUevSDfyRvTVgYKVJ7yogwrbr+1Ks4wrYdOrwAWMhWDVSYDauPu1AHj9dwudUYfxPpbrmXPePn63kMjfuMrZ9o053DM3Vdo6U/gg+YvWGoZDghvf8SxlHlH4GZx+nDmg+0UQCsx4ojasA/tKJOiT7Ziz2oL3er8l2fo1iEr4IZHnXLQoL1Kus5Cmix8jaW12OQOnRTWo2k1oWJjLPY4D1RfQDrtrniy/Yb4Suc+xAgPFX0YXY1nYflJChq3dPtPikFYCuNftunp1iSZ8GyutjCRcy7s59+vrQT6mJqQ5VZJCzUF+W2Aa5TfoESiFGof4/Jw64xhGGE3RXH9C0QBLu6zLMCa1FDPNyr9FrXXVE3K9VLkU94oXtOL64NEeWF6GKVx/G3t9BmAonLRQkkHl57VhlY12pdNpLAIoCz3EpCz9tOtafKb6yJFtqKRmbZsMIg6oPEaG8dRvHZ/dPQHdsngrLQ52tduijBKnIy1Q3uyFf5Hrs8bXWKSr8hk+sUlQkqTqws7WBrHn5xePZf6dX8qPfNJ5m4aIhL0uWV1t2xI2MMgXiSsXQY9AEg=
notifications:
  slack:
  - secure: lVJbD9RUCYtNpzXfyypXqXFNxY3T2dZSkdoRGcErzZUpPkT8ydjaGjXizTdFTF6nrK/0fMqJx3nannaLsViYkAt5cc7b9xf/FLd8i985va5/EaZexH2k/U8Tc0svKdnGk9sL7B/STx3XAJhKyIL7yBEKaKv8wWuXDmXplj6Rp85ZjeN/0tQ1mVbdCXb2wAANMJJFLvI8Te73iBkSgdM4Qjr5+FkEeGnVqRVjUQNaBDlGo65W5E6M4zb8k2YJiRBJ9anaj3hnI825O8IpBr1b4tUmOmCviWO0W9UyBoN1LPPY7Wx511CRFwhkY1ZftyMMV9BCS92oTT20sNXc6vFdIhQiPZKQ8YMUCOvfHKl5LZRU8GR55Ig3Veo4h/urfhEWunV3rjXIXLJ7nQhqwvDaEYacz919wSV8lSDTRNssO3uIyDmUpGQi+7LAq1asYJQEY7hO5PnXiXj4wDFF9Jwy1RWYMBCqOTGxoNze5s4uIIUOOqiOyxLqG4++KjQWV1L6659cdJP6K7W7rgGE/m7WNjE+BKi0p9dcuYSDtB3Dc3PuOxknD35wJoz5iGXfx2KLdUXCM4mMS8A3gLShHKJtA5/pZvbvvFEf7GmtvUKK3CyzSACBXUAlMKoOoSFnnaNyKD+YMQE7XkyNmF3S5NnXdEobE/FebKyRfVgR1WGl5Lc=
