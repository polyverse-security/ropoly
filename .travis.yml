sudo: required
dist: xenial
before_install:
- sudo apt update -y
- pip install --user awscli
install:
- mkdir -p ~/.local/lib && mkdir -p ~/.local/bin
- git clone https://$PV_OAUTH_TOKEN@github.com/polyverse-security/pv ~/.local/lib/pv
- ln -s ~/.local/lib/pv/pv ~/.local/bin/pv
script:
- pv aws ecr-login
- "./build.sh || travis_terminate 1;"
- "./test.sh || travis_terminate 1;"
- "./publish.sh || travis_terminate 1;"
env:
  global:
  - AWS_DEFAULT_REGION=us-west-2
  - secure: K8xek6nSPB1ixQ0bUq6dftYw8lfp1uTl7YXz7rEAVBbCOm89olqU+JV/TmKdhAtk/hT3n2IK2NBlPtANZqH2enhoLs7FpEfplEp4U/5iGRzK85tqDkEHDB94SVaZh1xOVdwM5Qg5VI1dX3e7dEvObmHYulExR6jd6q1ts+O5UDCIJIyHLOD4KsSGiFsYqRaSdBVl7ULeZXos1tRI37oQVXL4cx02RU/AVKOX2yn2cgx6ki78aFcrJ6IRw7IO1T5troLwYZZ94rgp0OfEX/lPXy1zhtUO3VO93X7Qk2bANKw9uiTVGAQ/pCTXgaSMOvnXbXN5qgKOQx2FJmdSqHYxJyiHMJyH3X5RlXFnQNrwZBP/A2KYkRECjCm4900LkZvxsZ0Vtdz5XkZs3JkfDTORyaFuStxudsgTQxAPpq3S9eqvhisCyCU72DobdFwIgp+/yRqAkaCtV+I0vnlj57C/0VitXOCKYkakde1/eIsy8wgwEvHbYAwnYjiSpDX8ZZqZTdRFxNg+27Zm2MN2mCss5ha/AeDtzPnzH33casBLyV0FBFr34hlbaEExkvaroeAfdfoFSxQrpuGoxp6PjW7+7nnp3/ikmjlF9P8vv1o8P7p8T1iKmLx7eTK9Ql7G4U7y/q/MA8jhwgZOURQyg9Pqz+CDuUD4FyBImwpAulSecC8=
  - secure: aYcCjcylfX7sR+3U9NaEVLnsJJxLP5i9rhbT4MFv379/coskJRvXf6zBl0rqIJXmJS4QcnRY1GmOCW3OiHFdul4BtwwIThUvUxIC009YAM7z7AkT3GNgZC3OrcOZGxS/Dn7AXT8/H0ylEWEpCS2HwCvlaEXAj3bilXuf+HL4mWy0Y6tEIfbOpCi65TGwlU8kJwW+RrTeaLBrn4/LbAyKXxzTt3yZi0nxfvUj2DAQIg268hOP7aGg5WwpgLrXDxWcGGbKwOnRdUyjnAcmRUiODhfh6Dn0dWj5QlOMSBiab2Ak05mIYf7gkiyYSoYmGpH4CGK4C5Yxhxf6OIRf72K3M/b+wS1OSwOq/kgvBSF3WOVdQxgoy2C1xnN5YgiSdEvDx7UQ+sChrnaVwunYM/XhrBmh+V0wdjWi/0n73kby+vDHIKEuS/Boj+qHy7ucCHhgobHDpNOQ6jXiGfZp97UQlLqzNd8G6fNJXutHJqo9sl12UBip8Q3QJkeFCm2zkZCKtfu/MpLpqIlF4bKOTuPiA/RkUPDfkDcwNDZNRUyR46YQedOKuXDLQxorhVD+CIa4Ac2SnuPG2DKEaiEr42Lpx20xnxKHQF1iNOrhw1WqoGF124L1N3A4zrS3E95Eafj6GFBVxN/jRRHTPSbb0Os/bjN66ApDnF8bfRpZiZjvsy4=
  - secure: iWH30WHkh1oeUHropnNfl4IeC4iAAw7v4Gv3IxrOAb5HvXO2aWNI14aEoJadbEqcy+Qi3N84MwOa0lzFmXBoqEeSjWjuPK8PtUcah7ad0crXFvxBvxWJ3OBFfuBsaViu7wyc2IBrhvk4ObmJJZwVzwXT19vYE2+JRlkN0SjVuiF+aug7xZAnsjLhSPhq3Q8kPoN6MQaKfLSIOVUzJuD2gldQS9P8w7ezc7Do3qcHj0fq0PXucc2+O6+BskCaO4klpvrWJE5fV4uj4RInaMnjjohhbMPD+Uc3dRruRsQ9eMCnl+t5MVmW4ukUvfVcL2o1BsnciTBI/WRJX1FVXtQNEr50v0UNExkAUsRjSIQ978LTg8u0vFghtu4W0h4hpBI5daODpOG01a36lCiyhGfwswCW1wuLgVJBGIChKKyuqmCowTVBm4I2Qv4JGChY0X0Fex9BMDev8NJbk/QSV6oh/xj9dPJL7Y10eNRSWiwMHLIQVAsICgj4cz6MFQ/EzIIBzvKuVhqsvwPcfY65Pvl+0cDPkYnxYYQ0LxAPXOBg7RxIyRE2TnrOB/IqResAA9OtzZnSTBLUcVjqCIhkVi7UMsSpScwsGSABYXD1++hE5WNaMCSVt90HBKj1IxiW8Kl10QdvkS4GfsIcF424adNljevBDFicjPAc/Lu7x50KQY0=
notifications:
  slack:
  - secure: PKDQxbY02EtEFamf2TioC3q1ipkvdKACunV8b4HMaBhBD9n/GFJWC+hyQjYdhUWNjq2Nu2BgwsFurUExxPqY6It7JqgXJwKv2cFwFRjwQ3PLOSi9ipgD4sIu4QL0zF4eqHuUmjagKPADpTIcxFAbQz3dkC9yORg/ITTK3Yddub1J/heB/pYW9l0cXQEWuRRL4l4RfLn4pSDX+7kpZW/hBcQblMPw+CHhLUcD36Vy0FfFC5JbEvJr80alhjskmHFePOYRs2/TxNob5jO6KjUjy6gmCj4MDTFqhk491nBVAXI4y25wubfiW9xQQZe4/Qd34fxI3ZqCNI5mC5g4lGtcw0eDiyAHc34z2BLp8Z492whqkxEUMpAVpXHh6pyRgNnzvHeHzZVHc3MnRCk9QL4tvwQ9yNXY9jNv2dK4l/ikKPjeYDeC9ZWSEegCYmrlwx0ZHBh4rTF8J/RpqvSMEcFU2SFWd7ENWf1uVeCBbP55CdAP+X+9sg44Vrqrwx+qdl8eSBpGj73NQLhSXQAPM6vdw+h6PuEXbtVXAwNk4eh7kFs/a+CggaHF3jadbbZFJb07UGtc5QhU51R4WN0Zt692Dag2Aq4A09mu59VT0N/PmB0I+FzgMp9vwWp1xxDQ78mdWG3DQ3E1WkmYbijXXMV4XK9he1HW/3M2y3dJwK+ZbuA=
  - secure: ROYlVJbD9RUCYtNpzXfyypXqXFNxY3T2dZSkdoRGcErzZUpPkT8ydjaGjXizTdFTF6nrK/0fMqJx3nannaLsViYkAt5cc7b9xf/FLd8i985va5/EaZexH2k/U8Tc0svKdnGk9sL7B/STx3XAJhKyIL7yBEKaKv8wWuXDmXplj6Rp85ZjeN/0tQ1mVbdCXb2wAANMJJFLvI8Te73iBkSgdM4Qjr5+FkEeGnVqRVjUQNaBDlGo65W5E6M4zb8k2YJiRBJ9anaj3hnI825O8IpBr1b4tUmOmCviWO0W9UyBoN1LPPY7Wx511CRFwhkY1ZftyMMV9BCS92oTT20sNXc6vFdIhQiPZKQ8YMUCOvfHKl5LZRU8GR55Ig3Veo4h/urfhEWunV3rjXIXLJ7nQhqwvDaEYacz919wSV8lSDTRNssO3uIyDmUpGQi+7LAq1asYJQEY7hO5PnXiXj4wDFF9Jwy1RWYMBCqOTGxoNze5s4uIIUOOqiOyxLqG4++KjQWV1L6659cdJP6K7W7rgGE/m7WNjE+BKi0p9dcuYSDtB3Dc3PuOxknD35wJoz5iGXfx2KLdUXCM4mMS8A3gLShHKJtA5/pZvbvvFEf7GmtvUKK3CyzSACBXUAlMKoOoSFnnaNyKD+YMQE7XkyNmF3S5NnXdEobE/FebKyRfVgR1WGl5Lc=
